<!--
=========================================================
* Argon Dashboard 2 - v2.0.4
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="/static/assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="/static/assets/img/favicon.png">
  <title>
    Register account | ADMS | L-NU ACAD Office
  </title>
  <!--     Fonts and icons    
  https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700
  -->
  <link href="/static/assets/css/fonts/open_sans.css" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="/static/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/static/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons 
  https://kit.fontawesome.com/42d5adcbca.js
  -->
  <script src="/static/assets/js/plugins/font-awesome.js" crossorigin="anonymous"></script>
  <link href="/static/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="/static/assets/css/argon-dashboard.css?v=2.0.4" rel="stylesheet" />

  <style>

    
    body {
      background: url('/static/assets/img/BGDESKTOP.jpg') !important;
    }

  </style>

</head>

<body class="">
  <div class="container position-sticky z-index-sticky top-0">
    <div class="row">
      <div class="col-12">
        <!-- Navbar -->
        {% include 'authentication/nav.html' %}
        <!-- End Navbar -->
      </div>
    </div>
  </div>
  <main class="main-content  mt-0">
    <section>
      <div class="page-header min-vh-100">
        <div class="container">
          <div class="row">
            <div class="col-lg-6 col-md-4 d-flex flex-column mx-lg-0  mx-auto">
              <div class="card">
                <div class="card-header pb-0 text-start">
                  <h4 class="font-weight-bolder">Register Account</h4>
                  
                    <div id="select_type">
                        <label> Please select: </label>
                        <div class="text-center d-flex justify-content-center">
                            
                            <button type="button" class="btn btn-lg bg-gradient-info btn-sm w-100 mx-2 mt-4 mb-0">Student</button>
                            <button type="button" class="btn btn-lg bg-gradient-info btn-sm w-100 mt-4 mb-0">Faculty</button>
                        </div>
                    </div>

                </div>
                <div class="card-body">
                   
                  <form role="form" id="student_form" action="{%url 'authentication:register-user' %}" method="POST" enctype="multipart/form-data">

                    {% csrf_token %}

                    <p class="mb-0">Please provide your information</p>
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">Select Course</label>
                        <select class="form-control" name="course">
                          {% for course in courses %}
                          <option value="{{course.id}}">{{ course.name }}</option>
                          {% endfor %}
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="text" name="student_number"class="form-control form-control-lg" placeholder="Student number" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="text" name="year_level" class="form-control form-control-lg" placeholder="Year (1st Year)" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="text" name="firstname" class="form-control form-control-lg" placeholder="Firstname" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="text" name="lastname" class="form-control form-control-lg" placeholder="Lastname" required>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <input type="email"  name="email" class="form-control form-control-lg" placeholder="Email" required>
                    </div>
                    <div class="mb-3">
                        <label>Please upload your latest student id or student load</label>
                        <input type="file" name="proof_of_enrollment" class="form-control form-control-lg" placeholder="proof_of_enrollment" accept=".pdf,.jpg,.jpeg,image/*" required>
                    </div>

                    <div class="text-center">
                      <button type="submit" class="btn btn-lg bg-gradient-info btn-lg w-100 mt-4 mb-0">Create account</button>
                    </div>
                  </form>

                  <form role="form" id="faculty_form" action="{% url 'authentication:register-employee' %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <p class="mb-0">Please provide your information</p>
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">Select Department</label>
                        <select class="form-control" name="department">
                          {% for department in departments %}
                          <option value="{{ department.id }}">{{ department.name }}</option>
                          {% endfor %}
                        </select>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="mb-3">
                                <input type="text" name="employee_number" class="form-control form-control-lg" placeholder="Employee number" required>
                            </div>
                        </div>
                        <div class="col-md-7">
                          <div class="mb-3">
                              <input type="email" name="email" class="form-control form-control-lg" placeholder="Company Email" required>
                          </div>
                      </div>

                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="text" name="firstname" class="form-control form-control-lg" placeholder="Firstname" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="text" name="lastname" class="form-control form-control-lg" placeholder="Lastname" required>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label>Please upload your employee ID</label>
                        <input type="file" name="employee_id" class="form-control form-control-lg" placeholder="Employee ID" required>
                    </div>
                    <div class="text-center">
                      <button type="submit" id="employee_btn" class="btn btn-lg bg-gradient-info btn-lg w-100 mt-4 mb-0">Create account</button>
                    </div>
                  </form>
                  
                </div>
                <div class="card-footer text-center pt-0 px-lg-2 px-1">
                  <p class="mb-4 text-sm mx-auto">
                    Already have an account?
                    <a href="/account/login/" class="text-primary text-gradient font-weight-bold">Sign in</a>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-6 d-lg-flex d-none h-100 my-auto pe-0 position-absolute top-0 end-0 text-center justify-content-center flex-column">
           
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <!--   Core JS Files   -->
  {% include 'includes/scripts.html' %}



  <script>
  
        document.addEventListener("DOMContentLoaded", function() {
            // Get references to the select type div and both forms
            var selectTypeDiv = document.getElementById("select_type");
            var studentForm = document.getElementById("student_form");
            var facultyForm = document.getElementById("faculty_form");
    
            // Initially hide both forms
            studentForm.style.display = "none";
            facultyForm.style.display = "none";
    
            // Add event listeners to the buttons
            selectTypeDiv.addEventListener("click", function(event) {
                if (event.target.matches("#select_type button")) {
                    // Hide both forms first
                    studentForm.style.display = "none";
                    facultyForm.style.display = "none";
    
                    // Determine which button was clicked and show the respective form
                    if (event.target.textContent.trim() === "Student") {
                        studentForm.style.display = "block";
                    } else if (event.target.textContent.trim() === "Faculty") {
                        facultyForm.style.display = "block";
                    }
                }
            });

            
        });

    

  </script>

<!-- Include jQuery -->



<!--

<script>
  $(document).ready(function() {
    $('#student_form').submit(function(e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: new FormData(this),
            processData: false,
            contentType: false,
            success: function(response) {
                if (response.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Registration submitted successfully!',
                        text: response.message,
                    }).then(function() {
                        
                        window.location.href = '/login/';
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: response.message,
                    });
                }
            },
            error: function(xhr, errmsg, err) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'An error occurred while processing your request. Please try again later.',
                });
            }
        });
    });
});

</script>

<script>
  $(document).ready(function() {
    $('#faculty_form').submit(function(e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: new FormData(this),
            processData: false,
            contentType: false,
            success: function(response) {
                if (response.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Registration submitted successfully!',
                        text: response.message,
                    }).then(function() {
                        
                        window.location.href = '/login/';
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: response.message,
                    });
                }
            },
            error: function(xhr, errmsg, err) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'An error occurred while processing your request. Please try again later.',
                });
            }
        });
    });
});

</script>

-->

<script>
  
  $(document).ready(function() {
    $('form#student_form, form#faculty_form').submit(function(e) {
      e.preventDefault(); // Prevent default form submission
  
      const form = $(this); // Reference the submitted form
  
      Swal.fire({
        title: 'Please wait...',
        text: 'Submitting your registration...',
        allowEscapeKey: false,
        allowOutsideClick: false,
        didOpen: () => {
          Swal.showLoading();
          $.ajax({
            type: 'POST',
            url: form.attr('action'),
            data: new FormData(this),
            processData: false,
            contentType: false,
            success: function(response) {
              Swal.hideLoading();
              if (response.success) {
                Swal.fire({
                  icon: 'success',
                  title: 'Registration submitted successfully!',
                  text: response.message,
                }).then(function() {
                  window.location.href = '/login/';
                });
              } else {
                Swal.fire({
                  icon: 'error',
                  title: 'Error',
                  text: response.message,
                });
              }
            },
            error: function(xhr, errmsg, err) {
              Swal.hideLoading();
              Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'An error occurred while processing your request. Please try again later.',
              });
            }
          });
        }
      });
    });
  });
  
  
  
</script>

<script>
  $(document).ready(function() {
    const emailInput = $('input[name="email"]');
    const emailBtn = $('#employee_btn');
  
    // Enable button by default (optional)
    emailBtn.prop('disabled', false);  // Use .prop() for setting disabled attribute
  
    emailInput.on('keyup change', function() {
      const emailValue = $(this).val();
      const validEmail = emailValue.endsWith('@lyceum.edu.ph');
  
      if (validEmail) {
        $(this).removeClass('is-invalid');
        $(this).addClass('is-valid');
        emailBtn.prop('disabled', false);  // Enable button if valid
      } else {
        $(this).removeClass('is-valid');
        $(this).addClass('is-invalid');
        emailBtn.prop('disabled', true);   // Disable button if invalid
      }
    });
  });
  
  </script>

  


</body>

</html>